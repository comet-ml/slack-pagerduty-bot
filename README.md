# slack-pagerduty-bot

A Slack bot that integrates with PagerDuty to trigger escalations

# Run Slack PagerDuty Bot with Helm

## Installation Prerequisites for local installation

- Docker - https://docs.docker.com/engine/install/

- kubectl - https://kubernetes.io/docs/tasks/tools/#kubectl

- Helm - https://helm.sh/docs/intro/install/

- minikube - https://minikube.sigs.k8s.io/docs/start

- more tools:
    - **`bash`** completion / `zsh` completion
    - `kubectx` and `kubens` - easy switch context/namespaces for kubectl -  https://github.com/ahmetb/kubectx

## Run k8s cluster locally

Start your `minikube` cluster https://minikube.sigs.k8s.io/docs/start/

```bash
minikube start
```

## Installing the Chart

### Using helm chart from Helm repo

Add Slack PagerDuty Bot Helm repo
```bash
helm repo add slack-pagerduty-bot https://comet-ml.github.io/slack-pagerduty-bot/
helm repo update
```

Set VERSION you want to install and run helm install

```bash
VERSION=0.1.0
helm upgrade --install slack-pagerduty-bot -n slack-pagerduty-bot --create-namespace slack-pagerduty-bot/slack-pagerduty-bot --set image.tag=$VERSION
```

### Using helm chart from git repository

```bash
git clone git@github.com:comet-ml/slack-pagerduty-bot.git
```

Go to the chart folder, set VERSION you want to install and run helm install

```bash
cd helm-chart
helm dependency build
VERSION=0.1.0
helm upgrade --install slack-pagerduty-bot -n slack-pagerduty-bot --create-namespace -f values.yaml \
    --set image.tag=$VERSION
```

# Helm Chart Details

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` |  |
| config.allowedChannels | string | `"***REMOVED***"` |  |
| config.debug | bool | `false` |  |
| fullnameOverride | string | `""` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"slack-pagerduty-bot"` |  |
| image.tag | string | `"latest"` |  |
| imagePullSecrets | list | `[]` |  |
| nameOverride | string | `""` |  |
| nodeSelector | object | `{}` |  |
| podAnnotations | object | `{}` |  |
| podSecurityContext | object | `{}` |  |
| replicaCount | int | `1` |  |
| resources.limits.cpu | string | `"500m"` |  |
| resources.limits.memory | string | `"512Mi"` |  |
| resources.requests.cpu | string | `"100m"` |  |
| resources.requests.memory | string | `"128Mi"` |  |
| secrets.developmentValues.PAGERDUTY_INTEGRATION_KEY | string | `""` |  |
| secrets.developmentValues.SLACK_APP_TOKEN | string | `""` |  |
| secrets.developmentValues.SLACK_BOT_TOKEN | string | `""` |  |
| secrets.existingSecretName | string | `"slack-pagerduty-secret"` |  |
| securityContext.runAsUser | int | `1000` |  |
| serviceAccount.annotations | object | `{}` |  |
| serviceAccount.create | bool | `false` |  |
| serviceAccount.name | string | `""` |  |
| tolerations | list | `[]` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)